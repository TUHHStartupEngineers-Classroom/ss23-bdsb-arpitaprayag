{
  "hash": "5953bad8263fab23dca6962c6c376a23",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Arpita Anand Prayag\"\nMatriculation number: \"564621\"\nformat: html\neditor: visual\n---\n\n\n# Data Wrangling Challenges Using Alternative 2\n\nPatent Dominance: What US company / corporation has the most patents? List the 10 US companies with the most assigned/granted patents..\n\n## Running Code\n\n### Load libraries\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_e6189819399e055057eef708625f8212'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(vroom)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'vroom'\n#> \n#> The following objects are masked from 'package:readr':\n#> \n#>     as.col_spec, col_character, col_date, col_datetime, col_double,\n#>     col_factor, col_guess, col_integer, col_logical, col_number,\n#>     col_skip, col_time, cols, cols_condense, cols_only, date_names,\n#>     date_names_lang, date_names_langs, default_locale, fwf_cols,\n#>     fwf_empty, fwf_positions, fwf_widths, locale, output_column,\n#>     problems, spec\n```\n:::\n\n```{.r .cell-code}\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'data.table'\n#> \n#> The following objects are masked from 'package:lubridate':\n#> \n#>     hour, isoweek, mday, minute, month, quarter, second, wday, week,\n#>     yday, year\n#> \n#> The following objects are masked from 'package:dplyr':\n#> \n#>     between, first, last\n#> \n#> The following object is masked from 'package:purrr':\n#> \n#>     transpose\n```\n:::\n\n```{.r .cell-code}\nlibrary(tictoc)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'tictoc'\n#> \n#> The following object is masked from 'package:data.table':\n#> \n#>     shift\n```\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(readxl)\n```\n:::\n\n\n##Data Import\n\n### Define column types for vroom\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-2_c61debee7cda3b07619269e3168adcf4'}\n\n```{.r .cell-code}\ncol_types <- list(\n  id = col_character(),\n  type = col_character(),\n  number = col_character(),\n  country = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  abstract = col_character(),\n  title = col_character(),\n  kind = col_character(),\n  num_claims = col_double(),\n  filename = col_character(),\n  withdrawn = col_double()\n)\n```\n:::\n\n\n## Using Alternative 2: The reduced data set for the year 2014\n\n### Read the data into a tibble\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-3_9f7908d308484cb5ff096db1ceb361e7'}\n\n```{.r .cell-code}\npatent_tbl <- vroom(\n  file = \"C:/Users/arpit/OneDrive/Documents/GitHub/repo/ss23-bdsb-arpitaprayag/assets/data/Patent_data_reduced/Patent_data_reduced/patent.tsv\", \n  delim = \"\\t\"\n  #col_types = col_types,\n  #na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Rows: 327014 Columns: 3\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \"\\t\"\n#> chr  (1): id\n#> dbl  (1): num_claims\n#> date (1): date\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nassignee_tbl <- vroom(\n  file = \"C:/Users/arpit/OneDrive/Documents/GitHub/repo/ss23-bdsb-arpitaprayag/assets/data/Patent_data_reduced/Patent_data_reduced/assignee.tsv\", \n  delim = \"\\t\", \n  col_types = col_types,\n  na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: number,\n#> country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\npatent_assignee_tbl <- vroom(\n  file = \"C:/Users/arpit/OneDrive/Documents/GitHub/repo/ss23-bdsb-arpitaprayag/assets/data/Patent_data_reduced/Patent_data_reduced/patent_assignee.tsv\", \n  delim = \"\\t\", \n  col_types = col_types,\n  na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> number, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nuspc_tbl <- vroom(\n  file = \"C:/Users/arpit/OneDrive/Documents/GitHub/repo/ss23-bdsb-arpitaprayag/assets/data/Patent_data_reduced/Patent_data_reduced/uspc.tsv\", \n  delim = \"\\t\", \n  col_types = col_types,\n  na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> number, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n:::\n\n\n### Join Tables\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-4_6b2a28f9ee6d30bd5e81d4254d7c069e'}\n\n```{.r .cell-code}\npatent_joined_table <- patent_assignee_tbl %>%\n  inner_join(assignee_tbl, by = c(\"assignee_id\" = \"id\")) %>%\n  inner_join(patent_tbl, by = c(\"patent_id\" = \"id\"))\n```\n:::\n\n\n###Patent Dominance: What US company/corporation has the most patents.List the 10 US companies with the most assigned/granted patents.\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-5_a11d57e4e504893d32c294dcad101491'}\n\n```{.r .cell-code}\nus_patent_counts <- patent_joined_table %>%\n  group_by(organization) %>%\n  summarise(total_patents = n()) %>%\n  arrange(desc(total_patents))\n\ntop_10_us_companies <- head(us_patent_counts, 10)\n\ntop_10_us_companies\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"total_patents\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"7547\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"5835\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"4099\"},{\"1\":\"Sony Corporation\",\"2\":\"3326\"},{\"1\":\"Microsoft Corporation\",\"2\":\"3165\"},{\"1\":\"Google Inc.\",\"2\":\"2668\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"2656\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"2597\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"2459\"},{\"1\":\"NA\",\"2\":\"2377\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n###What US organization had the most patents granted in August 2014? List the top 10 companies with the most new granted patents for August 2014.\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-6_c1109e7e65a4855022f1bdbaf18f673c'}\n\n```{.r .cell-code}\nus_patent_counts_aug_2014 <- patent_joined_table %>%\n  filter(format(date, \"%Y-%m\") == \"2014-08\") %>%\n  group_by(organization) %>%\n  summarise(total_patents = n()) %>%\n  arrange(desc(total_patents)) %>%\n  select(organization, total_patents)\n\ntop_10_us_companies_aug_2014 <- head(us_patent_counts_aug_2014, 10)\n\ntop_10_us_companies_aug_2014\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"total_patents\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"718\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"524\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"361\"},{\"1\":\"Microsoft Corporation\",\"2\":\"337\"},{\"1\":\"Sony Corporation\",\"2\":\"269\"},{\"1\":\"Google Inc.\",\"2\":\"240\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"223\"},{\"1\":\"Apple Inc.\",\"2\":\"222\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"213\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"211\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}